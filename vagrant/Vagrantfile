Vagrant.configure("2") do |config|
  config.vm.synced_folder "shared/", "/shared"
  #config.vm.provision "shell", inline: "apt-get -y install netemul;apt-get -y install ufw;apt-get install systemd"
    
  config.vm.define "m1" do |m1|
    m1.vm.box = "ubuntu/trusty64"
    m1.vm.network "private_network", ip: "192.168.6.7"
    m1.vm.provision :ansible do |ansible|
      ansible.limit = "all"
      ansible.playbook = "playbook.yml"
    end
    m1.vm.provision "shell", inline: "systemctl restart crmaster"
  end

  config.vm.define "m2" do |m2|
    m2.vm.box = "ubuntu/trusty64"
    m2.vm.network "private_network", ip: "192.168.6.8"
    m2.vm.provision :ansible do |ansible|
      ansible.limit = "all"
      ansible.playbook = "playbook.yml"
    end
    m2.vm.provision "shell", inline: "systemctl restart crnode"
  end

end
